<!-- Navbar -->
<%= render 'layouts/navbar' %>

<div class="show-container">
  <!-- Pictures of the product -->
  <div class="pictures">

    <%= cl_image_tag( @jam.photo, width: 450, height: 450, crop: :scale) %>
  </div>

  <!-- Information on the user -->
  <div class="information">

    <div class="user-info">

      <div class="avatar-info">
        <% avatar_url = "http://placehold.it/71x71" %>
        <%= image_tag avatar_url, class: "avatar-custom" %>
      </div>

      <div class="avatar-name">
        <p><strong><%= @user.email.split("@")[0] %></strong>
          <br>
          <strong><%= @jam.name %></strong>
        </p>
      </div>

    </div>


    <div class="discription-info">
      <span><%= @jam.description %></span>
    </div>
    <div class="mata-info">
      <p><%# @user.location %>
      <br>
      <%= time_ago_in_words(@jam.created_at) %> ago
      </p>
    </div>

  <!--   information about the price of the product -->
    <div class="buying-info">

      <a type="button" data-toggle="modal" data-target="#exampleModal" data-whatever=<% "#{@user.email}" %>>Buy</a>

      <span id="price"><%= "#{@jam.price} champignons" %></span>

    </div>

  <!--   Comments section -->
    <div class="comment-info">
      <ul>
        <% @comments.each do |comment| %>
          <li><strong><%= "#{@user.email.split("@")[0]}: " %></strong> <%="#{comment.content}" %></li>
        <% end %>
      </ul>

      <!--   Input Box -->
      <div class="row">
        <div class="comment-input-container">
          <div class="col-3">
              <input class="effect-1 submit_on_enter" type="text" placeholder="Add a comment...">
                <span class="focus-border"></span>
            </div>
          </div>
      </div>
    </div>

  </div>
</div>

<div class="modal" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel"></h5>
        <%= image_tag "yujams_logo.png" %>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <div class="user-form">

          <div class="form-inputs">

        <%= simple_form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>

            <%= f.error_notification %>

            <%= f.input :email, required: true, autofocus: true %>
            <%= f.input :password, required: true %>
            <% if devise_mapping.rememberable? -%>
              <%= f.check_box :remember_me, {:checked => "checked"} %>
              <%= f.label :remember_me %>
            <% end -%>
          </div>


        <div class="form-actions">

          <a><%= f.button :submit, "Apply" %></a>

        </div>


      <% end %>

    </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-danger">Send offer</button>
        <div class="currency-accepted">
          <span>The only currency accepeted is the Champignon</span>
        </div>
      </div>
    </div>
  </div>
</div>



<% content_for(:after_js) do %>
  <%= javascript_tag do %>

    $(document).ready(function() {

      $('.submit_on_enter').keydown(function(event) {

        if (event.keyCode == 13) {
          $('.submit_on_enter').submit();
          $('.submit_on_enter').val('');
          return false;
        }
      });

    });

  <% end %>
<% end %>












